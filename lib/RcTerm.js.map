{"version":3,"sources":["../src/RcTerm.jsx"],"names":["sizeFormat","parentNode","cols","rows","unitCol","unitRow","indexOf","clientWidth","Math","floor","parseInt","clientHeight","RcTerm","props","termID","Date","now","term","autoResize","useStyle","fontSize","onResize","termbox","document","getElementById","open","getElementsByClassName","style","window","addEventListener","size","resize","propTypes","bool","number","oneOfType","string","func"],"mappings":"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","file":"RcTerm.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Terminal from './term';\n\nfunction sizeFormat({ parentNode, cols = 120, rows = 24, unitCol = 7.203, unitRow = 18 }) {\n    if ((cols + '').indexOf('%') !== -1) {\n        if (parentNode.clientWidth > 0)\n            cols = Math.floor(parseInt(parseInt(cols) / 100 * parentNode.clientWidth - 10) / unitCol);\n        else cols = 120;\n    } else if ((cols + '').indexOf('px') !== -1) {\n        cols = Math.floor(parseInt(cols) / unitCol);\n    }\n    if ((rows + '').indexOf('%') !== -1) {\n        if (parentNode.clientHeight > 0)\n            rows = Math.floor(parseInt(parseInt(rows) / 100 * parentNode.clientHeight - 10) / unitRow);\n        else rows = 24;\n    } else if ((rows + '').indexOf('px') !== -1) {\n        rows = Math.floor(parseInt(rows) / unitRow);\n    }\n    return { cols, rows };\n}\n\nclass RcTerm extends Component {\n    constructor(props) {\n        super(props);\n        this.termID = Date.now();\n        this.term = null;\n    }\n\n    componentDidMount() {\n        let { autoResize = false, unitCol = 7.203, unitRow = 18, cols = 120, rows = 24, useStyle = true, fontSize = '11px', onResize, ...props } = this.props;\n        const termbox = document.getElementById(this.termID);\n        const parentNode = termbox.parentNode;\n        this.term = new Terminal({\n            ...sizeFormat({ parentNode, cols, rows, unitCol, unitRow }),\n            useStyle,\n            ...props,\n        });\n        this.term.open(termbox);\n        document.getElementsByClassName('terminal')[0].style.fontSize = fontSize;\n        if (autoResize) {\n            window.addEventListener('resize', () => {\n                const size = sizeFormat({ parentNode, cols, rows, unitCol, unitRow });\n                if (size.cols <= 0 || size.rows <= 0) {\n                    return false;\n                }\n                this.term.resize(size.cols, size.rows);\n                !!onResize && onResize(size);\n            })\n        }\n    }\n\n    render() {\n        return (\n            <div id={this.termID} ></div>\n        )\n    }\n}\n\nRcTerm.propTypes = {\n    autoResize: PropTypes.bool,\n    unitCol: PropTypes.number,\n    unitRow: PropTypes.number,\n    cols: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    rows: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    onResize: PropTypes.func,\n}\n\nexport default RcTerm;"]}